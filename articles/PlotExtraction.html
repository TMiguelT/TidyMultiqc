<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PlotExtraction • TidyMultiqc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="PlotExtraction">
<meta property="og:description" content="TidyMultiqc">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">TidyMultiqc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/TidyMultiqc.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/PlotExtraction.html">PlotExtraction</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/multimeric/TidyMultiqc/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="PlotExtraction_files/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1">
<link href="PlotExtraction_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet">
<script src="PlotExtraction_files/bootstrap-3.3.5/js/bootstrap.min.js"></script><script src="PlotExtraction_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script><script src="PlotExtraction_files/bootstrap-3.3.5/shim/respond.min.js"></script><style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="PlotExtraction_files/navigation-1.1/tabsets.js"></script><script src="PlotExtraction_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="PlotExtraction_files/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="PlotExtraction_files/pagedtable-1.1/js/pagedtable.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>PlotExtraction</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/multimeric/TidyMultiqc/blob/master/vignettes/PlotExtraction.Rmd"><code>vignettes/PlotExtraction.Rmd</code></a></small>
      <div class="hidden name"><code>PlotExtraction.Rmd</code></div>

    </div>

    
    
<div id="api" class="section level2">
<h2 class="hasAnchor">
<a href="#api" class="anchor"></a>API</h2>
<p>Recall from the last tutorial, that <code><a href="../reference/load_multiqc.html">load_multiqc()</a></code> takes a <code>plot_opts</code> list, which specifies which plots to include in our data frame, and how to extract them.</p>
<p>For example:</p>
<pre><code>plot_opts = list(
  `fastqc_per_sequence_quality_scores_plot` = list(
    extractor = extract_histogram,
    summary = list(median=median),
    prefix = "quality"
  )
)</code></pre>
<p><em>Each</em> element to the <code>plot_opts</code> list must have the following features. Refer to the appropriate section on each:</p>
<ul>
<li>
<a href="#plot-names"><strong>A name</strong></a> (<code>fastqc_per_sequence_quality_scores_plot</code> in this case)</li>
<li>A value, which is itself a list containing:
<ul>
<li><a href="#extractor-functions"><code>extractor</code>: the function that converts from the raw JSON to some kind of data frame</a></li>
<li><a href="#summary-functions"><code>summary</code>: the summary statistic you want to obtain from this data frame</a></li>
<li>
<code>prefix</code>: optionally, a custom name for this plot in your output</li>
</ul>
</li>
</ul>
</div>
<div id="plot-names" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-names" class="anchor"></a>Plot Names</h2>
<p>The names (or keys, if you want to think of it like a Python dictionary) of the <code>plot_opts</code> list must be plot identifiers. When you open up a multiqc report, you are used to seeing something like “FastQC: Per Sequence Quality Scores”. However internally this plot has an identifier which is more like <code>fastqc_per_sequence_quality_scores_plot</code>.</p>
<p>Finding out the plot identifier isn’t necessarily trivial, so we provide a useful function that does just that. Just run <code><a href="../reference/list_plots.html">list_plots()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/list_plots.html">list_plots</a></span><span class="op">(</span><span class="va">multiqc_data_path</span><span class="op">)</span></code></pre></div>
<div data-pagedtable="false">
<script data-pagedtable-source type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["chr"],"align":["left"]},{"label":["title"],"name":[2],"type":["chr"],"align":["left"]}],"data":[{"1":"qualimap_coverage_histogram","2":"Qualimap BamQC: Coverage histogram"},{"1":"qualimap_genome_fraction","2":"Qualimap BamQC: Genome fraction covered by at least X reads"},{"1":"qualimap_insert_size","2":"Qualimap BamQC: Insert size histogram"},{"1":"qualimap_gc_content","2":"Qualimap BamQC: GC content distribution"},{"1":"snpeff_variant_effects_region","2":"SnpEff: Counts by Genomic Region"},{"1":"snpeff_variant_effects_impact","2":"SnpEff: Counts by Effects Impact"},{"1":"snpeff_effects","2":"SnpEff: Counts by Effect Types"},{"1":"snpeff_variant_effects_class","2":"SnpEff: Counts by Functional Class"},{"1":"snpeff_qualities","2":"SnpEff: Qualities"},{"1":"gatk_varianteval_variant_plot","2":"GATK VariantEval: Variant Counts"},{"1":"picard_deduplication","2":"Picard: Deduplication Stats"},{"1":"fastqc_sequence_counts_plot","2":"FastQC: Sequence Counts"},{"1":"fastqc_per_base_sequence_quality_plot","2":"FastQC: Mean Quality Scores"},{"1":"fastqc_per_sequence_quality_scores_plot","2":"FastQC: Per Sequence Quality Scores"},{"1":"fastqc_per_sequence_gc_content_plot","2":"FastQC: Per Sequence GC Content"},{"1":"fastqc_per_base_n_content_plot","2":"FastQC: Per Base N Content"},{"1":"fastqc_sequence_duplication_levels_plot","2":"FastQC: Sequence Duplication Levels"},{"1":"fastqc_overrepresented_sequencesi_plot","2":"FastQC: Overrepresented sequences"},{"1":"fastqc_adapter_content_plot","2":"FastQC: Adapter Content"},{"1":"fastqc-status-check-heatmap","2":"FastQC: Status Checks"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
<p>Then, if there is a plot in the multiqc report that you want to analyse, note its title in the report, then look for that in the <code>title</code> column of this data frame. Then, copy the corresponding value in the <code>id</code> column, and use that as the name for your <code>plot_opts</code>.</p>
</div>
<div id="extractor-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#extractor-functions" class="anchor"></a>Extractor Functions</h2>
<p>This is a function that takes as input the raw JSON plot data for a single sample within a plot, and returns a data frame row. The resulting data will then be inserted into the final data frame for the corresponding sample. Generally plots contain multidimensional data, not just scalar values, and for this reason the returned row might have several “list columns”, whereby vectors are crammed into a single row of the data frame. Each plot type needs its own extractor function, and we recommend that you use one of the pre-existing extractor functions:</p>
<ul>
<li>
<code><a href="../reference/extract_xy.html">extract_xy()</a></code>:</li>
</ul>
<div id="writing-your-own" class="section level3">
<h3 class="hasAnchor">
<a href="#writing-your-own" class="anchor"></a>Writing your Own</h3>
<p>Some hints:</p>
<ul>
<li>Your function must absolutely always return a single data frame row, and not an entire data frame. It will be passed to <code>as_tibble_row()</code>, but ideally your function will ultimately return a value produced by <code>tibble_row()</code> anyway</li>
<li>Refer to the existing extractor functions for reference</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Michael Milton.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
